jQuery(document).ready(function(b){b(".sortable").sortable({handle:b(".sortable-list .drag-item"),axis:"y"});b(".box-row .add-new-item").on("click",function(){var d=b(this).parents(".box-row").find(".new-item ul").html();
b(this).parents(".box-row").find(".sortable-list").append(d);b(this).parents(".box-row").find(".sortable-list").find(".no-save").removeClass("no-save");
b(this).parents(".box-row").find(".sortable").sortable({handle:b(".sortable-list .drag-item"),axis:"y"});return false;});var c=function(){var d=b(this);
b("<div/>").text("These item will be permanently deleted and cannot be recovered. Are you sure?.").appendTo("body").dialog({title:"Delete Item",modal:false,width:400,hide:"fade",show:"fade",dialogClass:"ui-custom ui-custom-dialog",buttons:[{text:"Delete item","class":"ui-button-delete",click:function(){d.parents("li:eq(0)").fadeOut(400,function(){b(this).remove();
});b("#muttleypanel-notices").notify("create",{title:"Success!",text:"Item are removed."});b(this).dialog("close");}},{text:"Cancel","class":"ui-button-cancel",click:function(){b(this).dialog("close");
}}],open:function(e,f){b(e.target).parent().find(".ui-button-cancel span").prepend('<i class="fa icon fa-times"></i>');b(e.target).parent().find(".ui-button-delete span").prepend('<i class="fa icon fa-trash-o"></i>');
b(".ui-widget-overlay").addClass("ui-custom-overlay");b(window).resize(function(){b(e.target).dialog("option","position","center");});}});};b("body").on("click",".sortable-list .delete-item",c);
b(".box-row[data-depedency-el]").each(function(g){var k=b(this),j=k.attr("data-depedency-el"),e=k.attr("data-depedency-val"),d,h,f;if(b("#"+j).length){e=e.split(",");
h=b("#"+j).parents(".box-row");if(h.hasClass("dependent-hidden")){k.addClass("dependent-hidden");}else{f=b("#"+j);d=f.val();if(b.inArray(d,e)!==-1){k.removeClass("dependent-hidden");
}else{k.addClass("dependent-hidden");}}}});function a(e,d){b('.box-row[data-depedency-el="'+e+'"]').each(function(){var k=b(this),m=k.attr("data-id"),j=b('.box-row[data-id="'+m+'"]'),l=null,i,f,h;
if(j.length){h=j.attr("data-id");l=b('.box-row[data-depedency-el="'+h+'"]');}if(k.length){var g=k.attr("data-depedency-val");g=g.split(",");if(b.inArray(d,g)!==-1){if(l.length){f=j.find("#"+m).val();
i=l.attr("data-depedency-val");i=i.split(",");if(b.inArray(f,i)!==-1){l.removeClass("dependent-hidden");}}k.removeClass("dependent-hidden");}else{if(l.length){l.addClass("dependent-hidden");
}k.addClass("dependent-hidden");}}});}b(".select-image img").on("click",function(e){var f=b(this).parents(".box-row"),d=b("ul",f),h=b("select",f).attr("id"),g=b(this).attr("data-image_id");
b("img",d).removeClass("selected-image");b(this).addClass("selected-image");b('select option[value="'+g+'"]',f).attr("selected",true);a(h,g);e.preventDefault();
});b(".box-select").each(function(){var e=b(this),d=e.parents(".box-row");e.change(function(){var f=b(this).val();if(f==undefined){return;}a(e.attr("id"),f);
});});b(".multiselect").each(function(){var d=b(this).parents(".box-row");if(b(this).hasClass("save-empty")){b(this).change(function(){var e=b(this).attr("name");
if((b(this).val()||[])==""){d.append('<input type="hidden" name="'+e+'" value="" class="multiselect-empty">');}else{d.find(".multiselect-empty").remove();
}});}});b(".switch-wrap").each(function(){var i=b(this),h=i.parents(".box-row"),f=i.find("select"),g=i.find(".switch-on-off"),e=g.find(".onstate").attr("data-on"),d=g.find(".offstate").attr("data-off");
g.on("click",function(l){var n=b(this),j="",k;if(n.hasClass("on")){j=f.find("option").eq(1).val();f.val(j);n.removeClass("on").addClass("off");}else{j=f.find("option").eq(0).val();
f.val(j);n.removeClass("off").addClass("on");}var m=f.val();if(m==undefined){return;}a(f.attr("id"),m);l.preventDefault();});});(function(){var d,f,e;b(document).on("click",".upload-image",function(g){g.preventDefault();
e=b(this).parent().parent();f=e.find("input");if(d){d.open();return;}d=wp.media.frames.file_frame=wp.media({multiple:false,library:{type:"image"}});d.on("select",function(){attachment=d.state().get("selection").first().toJSON();
var h="";if(attachment.sizes==undefined){h=attachment.url;}else{if(attachment.sizes.thumbnail==undefined){h=attachment.sizes.full.url;}else{h=attachment.sizes.thumbnail.url;
}}e.find(".image-holder img").remove();e.find(".image-holder").append('<img src="'+h+'" alt="Image Preview">');e.find(".image-holder").addClass("is_image");
f.val(attachment.id);});d.on("open",function(){var h=d.state().get("selection"),i=f.val();if(i!==""){attachment=wp.media.attachment(i);attachment.fetch();
h.add(attachment?[attachment]:[]);}});d.open();});b(document).on("click",".remove-image",function(h){h.preventDefault();var g=b(this).parent().parent();
g.find(".image-holder img").remove();g.find("input").val("");g.find(".image-holder").removeClass("is_image");});b(document).on("change",".image-source-select",function(i){var h=b(this).parent(),g=b(this).find("option:selected").val();
if(g=="media_libary"){h.find(".image-holder").removeClass("hidden");h.find("input.image-input").attr("data-external_link",h.find("input.image-input").val());
h.find("input.image-input").val(h.find("input.image-input").attr("data-media_id"));h.find("input.image-input").attr("type","hidden");}else{if(g=="external_link"){h.find("input.image-input").attr("data-media_id",h.find("input.image-input").val());
h.find("input.image-input").val(h.find("input.image-input").attr("data-external_link"));h.find(".image-holder").addClass("hidden");h.find("input.image-input").attr("type","text");
}}});})();b(".datepicker-input").datepicker({dateFormat:"yy-mm-dd",beforeShow:function(d,e){e.dpDiv.addClass("_datepicker");}});b(".colorpicker-input").each(function(d){var e="color_picker_"+d;
b(this).attr("id",e);b("#"+e).wpColorPicker();});b(".easy-link").on("click",function(d){b(this).easyLink();d.preventDefault();});if(b(".mm-ids").length){b(".mm-ids").MediaManager();
}if(b(".generate-iframe").length){b(".generate-iframe").IframeGenerator();}if(b(".generate-bg").length){b(".generate-bg").BgGenerator();}});